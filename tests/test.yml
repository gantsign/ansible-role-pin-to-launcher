---
- hosts: all
  remote_user: root

  pre_tasks:
    - name: create test_usr
      become: yes
      user:
        name: test_usr
        state: present
        home: /home/test_usr
        createhome: yes

  roles:
    - role: ansible-role-pin-to-launcher
      users:
        - username: test_usr
          pin_to_launcher:
            launcher: dockbarx
            applications:
              - app_id: test-app
                desktop_file: /usr/share/applications/test-app.desktop
              - app_id: test-app2
                desktop_file: /usr/share/applications/test-app2.desktop
        - username: test_usr2
          pin_to_launcher:
            launcher: unsupported
            applications:
              - app_id: test-app
                desktop_file: /usr/share/applications/test-app.desktop
              - app_id: test-app2
                desktop_file: /usr/share/applications/test-app2.desktop
        - username: test_usr3
